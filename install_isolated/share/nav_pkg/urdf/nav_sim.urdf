<robot name="Mks_Saxx_1500">
  <material name="orange">
    <color rgba="1.0 0.5 0.2 1" />
  </material>
  <material name="gray">
    <color rgba="0.2 0.2 0.2 1" />
  </material>

  <link name="base_link">
   <visual>
    <geometry><box size="3.0 1.5 1.5"/></geometry>
    <origin xyz="0 0 0.75"/>
   </visual>
   <collision>
    <geometry><box size="3.0 1.5 1.5"/></geometry>
    <origin xyz="0 0 0.75"/>
   </collision>
   <inertial>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <mass value="400"/>
    <inertia ixx="100" iyy="100" izz="100" ixy="0" ixz="0" iyz="0"/>
   </inertial>


  </link>
  
  <link name="front_left_wheel">
   <visual><geometry><cylinder radius="0.25" length="0.1"/></geometry></visual>
   <collision>
    <geometry><cylinder radius="0.25" length="0.1"/></geometry>
   </collision>
   <inertial>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <mass value="5"/>
    <inertia ixx="0.1" iyy="0.1" izz="0.1" ixy="0" ixz="0" iyz="0"/>
   </inertial>

  </link>

  <link name="front_right_wheel">
   <visual><geometry><cylinder radius="0.25" length="0.1"/></geometry></visual>
   <collision>
    <geometry><cylinder radius="0.25" length="0.1"/></geometry>
   </collision>
   <inertial>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <mass value="5"/>
    <inertia ixx="0.1" iyy="0.1" izz="0.1" ixy="0" ixz="0" iyz="0"/>
   </inertial>

  </link>

  <link name="rear_left_wheel">
   <visual><geometry><cylinder radius="0.25" length="0.1"/></geometry></visual>
   <collision>
    <geometry><cylinder radius="0.25" length="0.1"/></geometry>
   </collision>
   <inertial>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <mass value="5"/>
    <inertia ixx="0.1" iyy="0.1" izz="0.1" ixy="0" ixz="0" iyz="0"/>
   </inertial>

  </link>

  <link name="rear_right_wheel">
   <visual><geometry><cylinder radius="0.25" length="0.1"/></geometry></visual>
   <collision>
    <geometry><cylinder radius="0.25" length="0.1"/></geometry>
   </collision>
   <inertial>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <mass value="5"/>
    <inertia ixx="0.1" iyy="0.1" izz="0.1" ixy="0" ixz="0" iyz="0"/>
   </inertial>

  </link>

  <link name="laser_link">
    <visual>
     <origin xyz="0 0 0" />
     <geometry>
      <box size="0.96 0.66 0.58" />
     </geometry>
     <material name="red" />
    </visual>
    <collision>
     <origin xyz="0 0 0" />
     <geometry>
      <box size="0.96 0.66 0.58" />
     </geometry>
     <material name="red" />
    </collision>
  </link>

  <joint name="laser_joint" type="fixed">
    <parent link="base_link"/>
    <child link="laser_link"/>
    <origin xyz="2 0 -0.3" rpy="0 0 3.1459"/>
  </joint>

  <joint name="rear_left_wheel_joint" type="continuous">
    <parent link="base_link"/>
    <child link="rear_left_wheel"/>
    <origin xyz="-1.2 0.75 0.0" rpy="0 0 0"/>
    <axis xyz="1 0 0"/>
  </joint>

  <joint name="rear_right_wheel_joint" type="continuous">
    <parent link="base_link"/>
    <child link="rear_right_wheel"/>
    <origin xyz="-1.2 -0.75 0.0" rpy="0 0 0"/>
    <axis xyz="1 0 0"/>
  </joint>

  <joint name="front_left_wheel_joint" type="continuous">
    <parent link="base_link"/>
    <child link="front_left_wheel"/>
    <origin xyz="1.2 0.75 0.0" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
  </joint>

  <joint name="front_right_wheel_joint" type="continuous">
    <parent link="base_link"/>
    <child link="front_right_wheel"/>
    <origin xyz="1.2 -0.75 0.0" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
  </joint>

 <gazebo>
  <plugin name="diff_drive_controller" filename="libgazebo_ros_diff_drive.so">
    <ros>
      <namespace>/</namespace>
      <remapping>cmd_vel:=/cmd_vel</remapping>
      <remapping>odom:=/odom</remapping>
    </ros>

    <updateRate>50</updateRate>

    <!-- rear wheel joints -->
    <leftJoint>rear_left_wheel_joint</leftJoint>
    <rightJoint>rear_right_wheel_joint</rightJoint>

    <!-- wheel and base geometry -->
    <wheelSeparation>1.5</wheelSeparation>
    <wheelDiameter>0.5</wheelDiameter>

    <!-- publish odometry -->
    <publishOdom>true</publishOdom>
    <publishOdomTF>true</publishOdomTF>
    <publishWheelTF>false</publishWheelTF>

    <!-- frame IDs -->
    <odometryFrame>odom</odometryFrame>
    <robotBaseFrame>base_link</robotBaseFrame>
  </plugin>
</gazebo>

  <gazebo reference="laser_link">
   <sensor type="ray" name="saxx_laser">
    <pose>0 0 0 0 0 0</pose>
    <update_rate>20</update_rate>
    <visualize>true</visualize>
    <ray>
     <scan>
      <horizontal>
       <samples>720</samples>
       <resolution>1</resolution>
       <min_angle>-1.5708</min_angle>
       <max_angle>1.5708</max_angle>
      </horizontal>
     </scan>
     <range>
      <min>0.05</min>
      <max>12.0</max>
      <resolution>0.01</resolution>
     </range>
     <noise>
      <type>gaussian</type>
      <mean>0.0</mean>
      <stddev>0.01</stddev>
     </noise>
    </ray>

    <plugin name="gazebo_ros_laser" filename="libgazebo_ros_laser.so">
     <topicName>/scan</topicName>
     <frameName>laser_link</frameName>
     <gaussianNoise>0.01</gaussianNoise>
     <hackBaseline>0.0</hackBaseline>
    </plugin>
   </sensor>
  </gazebo>

</robot>
